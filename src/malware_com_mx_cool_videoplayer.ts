import { print } from "../agent/logger";
import { anti } from "../agent/utils/android/anti";

const apk_package: string = "com.mx.cool.videoplayer";

function main() {
    let clazz_a_b_c = Java.use("a.b.c");

    clazz_a_b_c.b.implementation = function (args: any) {
        print(`args[0] = ${args[0]}`);
        print(`args[1] = ${args[1]}`);
        print(`args[2] = ${args[2]}`);

        const ret: string = this.b(args);
        print(ret);
    };
}

setTimeout(function () {
    anti.anti_debug()
    Java.perform(function () {
        console.log("n[*] enumerating classes...");
        Java.enumerateLoadedClasses({
            onMatch: function (_className) {
                if(_className.indexOf("a.b.c") >= 0) print("[*] found instance of '" + _className + "'");
            },
            onComplete: function () {
                console.log("[*] class enuemration complete");
            },
        });
    });
});
